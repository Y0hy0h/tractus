---
created: "2019-07-21T12:33:17.614130200Z"
creator: insta@0.8.2
source: tests/snapshots.rs
expression: result
---
Ok(
    [
        Comment(
            "###",
        ),
        Comment(
            "## Comparing keyboard layouts: QWERTY, Dvorak, and Colemak",
        ),
        Comment(
            "##",
        ),
        Comment(
            "## One-way ANOVA",
        ),
        Comment(
            "# read in a data file with task completion Speeds (min) now from 3 tools",
        ),
        Assignment(
            Variable(
                "kbd",
            ),
            Call(
                "read.csv",
                [
                    (
                        None,
                        Constant(
                            "\"./2-kbd-study.csv\"",
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "View",
                [
                    (
                        None,
                        Variable(
                            "kbd",
                        ),
                    ),
                ],
            ),
        ),
        Assignment(
            Column(
                Variable(
                    "kbd",
                ),
                Variable(
                    "ParticipantID",
                ),
            ),
            Call(
                "factor",
                [
                    (
                        None,
                        Column(
                            Variable(
                                "kbd",
                            ),
                            Variable(
                                "ParticipantID",
                            ),
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "summary",
                [
                    (
                        None,
                        Variable(
                            "kbd",
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# view descriptive statistics by Speed",
        ),
        Library(
            "plyr",
        ),
        Expression(
            Call(
                "ddply",
                [
                    (
                        None,
                        Variable(
                            "kbd",
                        ),
                    ),
                    (
                        None,
                        Formula(
                            OneSided(
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        None,
                        Function(
                            [
                                (
                                    "data",
                                    None,
                                ),
                            ],
                            "summary(data$Speed)",
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "ddply",
                [
                    (
                        None,
                        Variable(
                            "kbd",
                        ),
                    ),
                    (
                        None,
                        Formula(
                            OneSided(
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        None,
                        Variable(
                            "summarise",
                        ),
                    ),
                    (
                        Some(
                            "Speed.mean",
                        ),
                        Call(
                            "mean",
                            [
                                (
                                    None,
                                    Variable(
                                        "Speed",
                                    ),
                                ),
                            ],
                        ),
                    ),
                    (
                        Some(
                            "Speed.sd",
                        ),
                        Call(
                            "sd",
                            [
                                (
                                    None,
                                    Variable(
                                        "Speed",
                                    ),
                                ),
                            ],
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# explore new response distribution",
        ),
        Expression(
            Call(
                "hist",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"QWERTY\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "hist",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"Dvorak\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "hist",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"Colemak\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "plot",
                [
                    (
                        None,
                        Formula(
                            TwoSided(
                                "Speed",
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        Some(
                            "data",
                        ),
                        Variable(
                            "kbd",
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# test normality for new Layout",
        ),
        Expression(
            Call(
                "shapiro.test",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"QWERTY\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "shapiro.test",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"Dvorak\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "shapiro.test",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"Colemak\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                ],
            ),
        ),
        Assignment(
            Variable(
                "m",
            ),
            Call(
                "aov",
                [
                    (
                        None,
                        Formula(
                            TwoSided(
                                "Speed",
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        Some(
                            "data",
                        ),
                        Variable(
                            "kbd",
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "shapiro.test",
                [
                    (
                        None,
                        Call(
                            "residuals",
                            [
                                (
                                    None,
                                    Variable(
                                        "m",
                                    ),
                                ),
                            ],
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "qqnorm",
                [
                    (
                        None,
                        Call(
                            "residuals",
                            [
                                (
                                    None,
                                    Variable(
                                        "m",
                                    ),
                                ),
                            ],
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "qqline",
                [
                    (
                        None,
                        Call(
                            "residuals",
                            [
                                (
                                    None,
                                    Variable(
                                        "m",
                                    ),
                                ),
                            ],
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# test log-normality of new Layout",
        ),
        Library(
            "MASS",
        ),
        Assignment(
            Variable(
                "fit",
            ),
            Column(
                Call(
                    "fitdistr",
                    [
                        (
                            None,
                            Column(
                                Index(
                                    Variable(
                                        "kbd",
                                    ),
                                    [
                                        Some(
                                            Infix(
                                                "==",
                                                Column(
                                                    Variable(
                                                        "kbd",
                                                    ),
                                                    Variable(
                                                        "Layout",
                                                    ),
                                                ),
                                                Constant(
                                                    "\"QWERTY\"",
                                                ),
                                            ),
                                        ),
                                        None,
                                    ],
                                ),
                                Variable(
                                    "Speed",
                                ),
                            ),
                        ),
                        (
                            None,
                            Constant(
                                "\"lognormal\"",
                            ),
                        ),
                    ],
                ),
                Variable(
                    "estimate",
                ),
            ),
        ),
        Expression(
            Call(
                "ks.test",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"QWERTY\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                    (
                        None,
                        Constant(
                            "\"plnorm\"",
                        ),
                    ),
                    (
                        Some(
                            "meanlog",
                        ),
                        Index(
                            Variable(
                                "fit",
                            ),
                            [
                                Some(
                                    Constant(
                                        "1",
                                    ),
                                ),
                            ],
                        ),
                    ),
                    (
                        Some(
                            "sdlog",
                        ),
                        Index(
                            Variable(
                                "fit",
                            ),
                            [
                                Some(
                                    Constant(
                                        "2",
                                    ),
                                ),
                            ],
                        ),
                    ),
                    (
                        Some(
                            "exact",
                        ),
                        Constant(
                            "TRUE",
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# compute new log(Speed) column and re-test",
        ),
        Assignment(
            Column(
                Variable(
                    "kbd",
                ),
                Variable(
                    "logSpeed",
                ),
            ),
            Call(
                "log",
                [
                    (
                        None,
                        Column(
                            Variable(
                                "kbd",
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "View",
                [
                    (
                        None,
                        Variable(
                            "kbd",
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "shapiro.test",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"QWERTY\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "logSpeed",
                            ),
                        ),
                    ),
                ],
            ),
        ),
        Assignment(
            Variable(
                "m",
            ),
            Call(
                "aov",
                [
                    (
                        None,
                        Formula(
                            TwoSided(
                                "logSpeed",
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        Some(
                            "data",
                        ),
                        Variable(
                            "kbd",
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "shapiro.test",
                [
                    (
                        None,
                        Call(
                            "residuals",
                            [
                                (
                                    None,
                                    Variable(
                                        "m",
                                    ),
                                ),
                            ],
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "qqnorm",
                [
                    (
                        None,
                        Call(
                            "residuals",
                            [
                                (
                                    None,
                                    Variable(
                                        "m",
                                    ),
                                ),
                            ],
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "qqline",
                [
                    (
                        None,
                        Call(
                            "residuals",
                            [
                                (
                                    None,
                                    Variable(
                                        "m",
                                    ),
                                ),
                            ],
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# test homoscedasticity",
        ),
        Library(
            "car",
        ),
        Expression(
            Call(
                "leveneTest",
                [
                    (
                        None,
                        Formula(
                            TwoSided(
                                "Speed",
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        Some(
                            "data",
                        ),
                        Variable(
                            "kbd",
                        ),
                    ),
                    (
                        Some(
                            "center",
                        ),
                        Variable(
                            "median",
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# one-way ANOVA, suitable now to logSpeed",
        ),
        Assignment(
            Variable(
                "m",
            ),
            Call(
                "aov",
                [
                    (
                        None,
                        Formula(
                            TwoSided(
                                "Speed",
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        Some(
                            "data",
                        ),
                        Variable(
                            "kbd",
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "anova",
                [
                    (
                        None,
                        Variable(
                            "m",
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# post hoc independent-samples t-tests",
        ),
        Expression(
            Call(
                "plot",
                [
                    (
                        None,
                        Formula(
                            TwoSided(
                                "Speed",
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        Some(
                            "data",
                        ),
                        Variable(
                            "kbd",
                        ),
                    ),
                ],
            ),
        ),
        Library(
            "multcomp",
        ),
        Expression(
            Call(
                "summary",
                [
                    (
                        None,
                        Call(
                            "glht",
                            [
                                (
                                    None,
                                    Variable(
                                        "m",
                                    ),
                                ),
                                (
                                    None,
                                    Call(
                                        "mcp",
                                        [
                                            (
                                                Some(
                                                    "Layout",
                                                ),
                                                Constant(
                                                    "\"Tukey\"",
                                                ),
                                            ),
                                        ],
                                    ),
                                ),
                            ],
                        ),
                    ),
                    (
                        Some(
                            "test",
                        ),
                        Call(
                            "adjusted",
                            [
                                (
                                    Some(
                                        "type",
                                    ),
                                    Constant(
                                        "\"holm\"",
                                    ),
                                ),
                            ],
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# note: equivalent to this using lsm instead of mcp",
        ),
        Library(
            "lsmeans",
        ),
        Expression(
            Call(
                "summary",
                [
                    (
                        None,
                        Call(
                            "glht",
                            [
                                (
                                    None,
                                    Variable(
                                        "m",
                                    ),
                                ),
                                (
                                    None,
                                    Call(
                                        "lsm",
                                        [
                                            (
                                                None,
                                                Formula(
                                                    TwoSided(
                                                        "pairwise",
                                                        Variable(
                                                            "Layout",
                                                        ),
                                                    ),
                                                ),
                                            ),
                                        ],
                                    ),
                                ),
                            ],
                        ),
                    ),
                    (
                        Some(
                            "test",
                        ),
                        Call(
                            "adjusted",
                            [
                                (
                                    Some(
                                        "type",
                                    ),
                                    Constant(
                                        "\"holm\"",
                                    ),
                                ),
                            ],
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "## Nonparametric equivalent of one-way ANOVA",
        ),
        Comment(
            "# Kruskal-Wallis test",
        ),
        Library(
            "coin",
        ),
        Expression(
            Call(
                "kruskal_test",
                [
                    (
                        None,
                        Formula(
                            TwoSided(
                                "Speed",
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        Some(
                            "data",
                        ),
                        Variable(
                            "kbd",
                        ),
                    ),
                    (
                        Some(
                            "distribution",
                        ),
                        Constant(
                            "\"asymptotic\"",
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "kruskal_test",
                [
                    (
                        None,
                        Formula(
                            TwoSided(
                                "logSpeed",
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        Some(
                            "data",
                        ),
                        Variable(
                            "kbd",
                        ),
                    ),
                    (
                        Some(
                            "distribution",
                        ),
                        Constant(
                            "\"asymptotic\"",
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# for reporting Kruskal-Wallis as chi-square, we can get N with nrow(kbd)",
        ),
        Comment(
            "# manual post hoc Mann-Whitney U pairwise comparisons",
        ),
        Comment(
            "# note: wilcox_test we used above doesn\'t take two data vectors, so use wilcox.test",
        ),
        Assignment(
            Variable(
                "vs.ec",
            ),
            Call(
                "wilcox.test",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"Dvorak\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"QWERTY\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                    (
                        Some(
                            "exact",
                        ),
                        Constant(
                            "FALSE",
                        ),
                    ),
                ],
            ),
        ),
        Assignment(
            Variable(
                "vs.py",
            ),
            Call(
                "wilcox.test",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"Colemak\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"QWERTY\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                    (
                        Some(
                            "exact",
                        ),
                        Constant(
                            "FALSE",
                        ),
                    ),
                ],
            ),
        ),
        Assignment(
            Variable(
                "ec.py",
            ),
            Call(
                "wilcox.test",
                [
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"Colemak\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                    (
                        None,
                        Column(
                            Index(
                                Variable(
                                    "kbd",
                                ),
                                [
                                    Some(
                                        Infix(
                                            "==",
                                            Column(
                                                Variable(
                                                    "kbd",
                                                ),
                                                Variable(
                                                    "Layout",
                                                ),
                                            ),
                                            Constant(
                                                "\"Dvorak\"",
                                            ),
                                        ),
                                    ),
                                    None,
                                ],
                            ),
                            Variable(
                                "Speed",
                            ),
                        ),
                    ),
                    (
                        Some(
                            "exact",
                        ),
                        Constant(
                            "FALSE",
                        ),
                    ),
                ],
            ),
        ),
        Expression(
            Call(
                "p.adjust",
                [
                    (
                        None,
                        Call(
                            "c",
                            [
                                (
                                    None,
                                    Column(
                                        Variable(
                                            "vs.ec",
                                        ),
                                        Variable(
                                            "p.value",
                                        ),
                                    ),
                                ),
                                (
                                    None,
                                    Column(
                                        Variable(
                                            "vs.py",
                                        ),
                                        Variable(
                                            "p.value",
                                        ),
                                    ),
                                ),
                                (
                                    None,
                                    Column(
                                        Variable(
                                            "ec.py",
                                        ),
                                        Variable(
                                            "p.value",
                                        ),
                                    ),
                                ),
                            ],
                        ),
                    ),
                    (
                        Some(
                            "method",
                        ),
                        Constant(
                            "\"holm\"",
                        ),
                    ),
                ],
            ),
        ),
        Comment(
            "# alternative approach is using PMCMR for nonparam pairwise comparisons",
        ),
        Library(
            "PMCMR",
        ),
        Expression(
            Call(
                "posthoc.kruskal.conover.test",
                [
                    (
                        None,
                        Formula(
                            TwoSided(
                                "Speed",
                                Variable(
                                    "Layout",
                                ),
                            ),
                        ),
                    ),
                    (
                        Some(
                            "data",
                        ),
                        Variable(
                            "kbd",
                        ),
                    ),
                    (
                        Some(
                            "p.adjust.method",
                        ),
                        Constant(
                            "\"holm\"",
                        ),
                    ),
                ],
            ),
        ),
    ],
)
